<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #f6f8fc;          /* Ù‚Ø±ÙŠØ¨ Ù…Ù† Ø®Ù„ÙÙŠØ© ØµÙØ­Ø§Øª Ø¬ÙˆØ¬Ù„ */
      --card: #ffffff;
      --text: #1f1f1f;
      --muted: #5f6368;       /* Ø±Ù…Ø§Ø¯ÙŠ Ø¬ÙˆØ¬Ù„ */
      --primary: #1a73e8;     /* Ø£Ø²Ø±Ù‚ Ø¬ÙˆØ¬Ù„ */
      --primary-pressed:#1558ad;
      --error: #d93025;
      --border: #e0e3e7;
      --focus: #1a73e8;
      --shadow: 0 10px 24px rgba(0,0,0,.08), 0 1px 2px rgba(0,0,0,.06);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "Cairo", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      display: grid;
      place-items: center;
    }

    .container {
      width: 100%;
      max-width: 960px;
      padding: 24px;
    }

    .header {
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
      margin-bottom: 18px;
      color: var(--muted);
      font-size: 14px;
    }
    .g-dot { width: 8px; height: 8px; border-radius: 50%; display: inline-block; }
    .g-dot.blue { background:#1a73e8 }
    .g-dot.red { background:#ea4335 }
    .g-dot.yellow { background:#fbbc05 }
    .g-dot.green { background:#34a853 }

    .card {
      display: grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 0;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .illustration {
      background: linear-gradient(135deg, #f4f8ff 0%, #eef3ff 100%);
      padding: 32px;
      display: grid; align-content: center;
    }
    .illustration h1 { margin: 0 0 8px; font-size: 28px; font-weight: 700; }
    .illustration p { margin: 0; color: var(--muted); line-height: 1.7; }
    .badge {
      display:inline-flex; align-items:center; gap:8px;
      background:#fff; border:1px solid var(--border); padding:6px 10px; border-radius: 999px;
      width: fit-content; box-shadow: 0 4px 12px rgba(0,0,0,.06);
      margin-bottom: 16px; color: var(--muted); font-size: 12px;
    }

    form {
      padding: 32px; position: relative; min-height: 420px;
      display: grid; align-content: start; gap: 16px;
    }

    .brand {
      display:flex; align-items:center; gap:12px; justify-content:center; margin-bottom: 12px;
    }
    .pseudo-logo {
      width: 36px; height: 36px; border-radius: 8px; display:grid; place-items:center; font-weight:800;
    }

    .title { text-align:center; margin:0; font-size: 22px; }
    .subtitle { text-align:center; color: var(--muted); margin:0 0 10px; font-size: 14px; }

    .field { position: relative; }
    .label { font-size: 12px; color: var(--muted); margin-bottom: 6px; display:block; }
    .input {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: 12px;
      outline: none;
      font-size: 15px;
      background: #fff;
    }
    .input:focus { border-color: var(--focus); box-shadow: 0 0 0 3px rgba(26,115,232,.14); }

    .row { display:flex; align-items:center; justify-content:space-between; gap: 12px; }
    .link { color: var(--primary); text-decoration: none; font-weight: 600; }

    .btn { width: 100%; border: none; cursor:pointer; border-radius: 12px; padding: 12px 14px; font-size: 15px; font-weight:700; }
    .btn.primary { background: var(--primary); color: #fff; }
    .btn.primary:active { background: var(--primary-pressed); }
    .btn.neutral { background: #fff; border: 1px solid var(--border); }

    .with-divider { display:grid; gap: 12px; }
    .divider { display:flex; align-items:center; gap:12px; color: var(--muted); font-size: 12px; }
    .divider::before, .divider::after { content:""; height:1px; background: var(--border); flex:1; }

    .error { color: var(--error); font-size: 13px; min-height: 18px; }
    .success { color: #1e8e3e; font-size: 13px; min-height: 18px; }

    .oauth-btn { display:flex; align-items:center; justify-content:center; gap:10px; }
    .g-icon { width:35px; height:35px; border-radius: 10px; }

    .footer-note { text-align:center; color: var(--muted); font-size: 12px; }

    .spinner { width: 18px; height: 18px; border: 2px solid #fff; border-top-color: transparent; border-radius: 50%; display: none; animation: spin 0.8s linear infinite; }
    .loading .spinner { display:inline-block; }
    .loading .btn-text { opacity:.7 }
    @keyframes spin { to { transform: rotate(1turn);} }

    @media (max-width: 860px){
      .card { grid-template-columns: 1fr; }
      .illustration { display:none; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header" aria-hidden="true">
      <span class="g-dot blue"></span>
      <span class="g-dot red"></span>
      <span class="g-dot yellow"></span>
      <span class="g-dot green"></span>
      <span>ØªØ¬Ø±Ø¨Ø© Ø¯Ø®ÙˆÙ„ Ø­Ø¯ÙŠØ«Ø©</span>
    </div>

    <div class="card" role="region" aria-label="Ù†Ù…ÙˆØ°Ø¬ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„">
      <div class="illustration">
        <div class="badge"><span class="g-dot blue"></span> Ø¢Ù…Ù† ÙˆØ³Ø±ÙŠØ¹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Firebase</div>
        <h1>Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ø¹ÙˆØ¯ØªÙƒ ğŸ‘‹</h1>
        <p>Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø£Ùˆ Ø¹Ø¨Ø± Ø­Ø³Ø§Ø¨ Google. 
        </p>
      </div>

      <form id="auth-form" novalidate>
        <div class="brand">
         <div>
            <h2 class="title">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <p class="subtitle">Ø§Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
          </div>
        </div>

        <div class="field">
          <label class="label" for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
          <input id="email" class="input" type="email" placeholder="name@example.com" autocomplete="email" required />
        </div>

        <div class="field">
          <label class="label" for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
          <div style="position:relative">
            <input id="password" class="input" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" autocomplete="current-password" required />
            <button type="button" id="togglePass" aria-label="Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡" style="position:absolute; inset-inline-end:8px; inset-block-start:8px; border:none; background:transparent; cursor:pointer; color:var(--muted)">Ø¥Ø¸Ù‡Ø§Ø±</button>
          </div>
        </div>

        <div class="row">
          <label style="display:flex; align-items:center; gap:8px; color:var(--muted); font-size: 13px;">
            <input id="remember" type="checkbox" /> ØªØ°ÙƒÙ‘Ø±Ù†ÙŠ
          </label>
          <a class="link" href="#" id="forgot">Ù‡Ù„ Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ</a>
        </div>

        <div class="error" id="error"></div>
        <div class="success" id="success"></div>

        <button id="emailBtn" class="btn primary oauth-btn" type="submit">
          <span class="spinner" aria-hidden="true"></span>
          <span class="btn-text">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</span>
        </button>

        <div class="with-divider">
          <div class="divider">Ø£Ùˆ</div>
          <button id="googleBtn" class="btn neutral oauth-btn" type="button">
            
     
            <span>Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google</span>
          </button>
        </div>

        <div class="footer-note">
          Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a class="link" href="#" id="switchMode">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Firebase SDKs (v10 modular) -->
  <script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';
    import { getAuth, setPersistence, browserLocalPersistence, browserSessionPersistence, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, sendPasswordResetEmail } from 'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';

    // 1) Ø¶Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù‡Ù†Ø§ (Ù…Ù† Firebase Console > Project settings > General)
   const firebaseConfig = {
  apiKey: "AIzaSyDfWFwf6aTMBdgqDXXyt--Cyy-ZGL0bpmc",
  authDomain: "ahmed-samir-6fbdf.firebaseapp.com",
  databaseURL: "https://ahmed-samir-6fbdf-default-rtdb.firebaseio.com",
  projectId: "ahmed-samir-6fbdf",
  storageBucket: "ahmed-samir-6fbdf.firebasestorage.app",
  messagingSenderId: "876170853490",
  appId: "1:876170853490:web:825152d54d8f21898e16eb",
  measurementId: "G-BZY09TCPLP"
};


    // 2) ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    const form = document.getElementById('auth-form');
    const switchMode = document.getElementById('switchMode');
    const googleBtn = document.getElementById('googleBtn');
    const emailBtn = document.getElementById('emailBtn');
    const forgot = document.getElementById('forgot');
    const togglePass = document.getElementById('togglePass');
    const emailInput = document.getElementById('email');
    const passInput = document.getElementById('password');
    const remember = document.getElementById('remember');
    const errorEl = document.getElementById('error');
    const successEl = document.getElementById('success');

    let mode = 'login'; // Ø£Ùˆ 'signup'

    function setLoading(loading) {
      form.classList.toggle('loading', loading);
      emailBtn.disabled = loading;
      googleBtn.disabled = loading;
    }

    function showError(msg) {
      errorEl.textContent = msg || '';
      successEl.textContent = '';
    }
    function showSuccess(msg) {
      successEl.textContent = msg || '';
      errorEl.textContent = '';
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    togglePass.addEventListener('click', () => {
      const isPassword = passInput.type === 'password';
      passInput.type = isPassword ? 'text' : 'password';
      togglePass.textContent = isPassword ? 'Ø¥Ø®ÙØ§Ø¡' : 'Ø¥Ø¸Ù‡Ø§Ø±';
      passInput.focus();
    });

    // ØªØ¨Ø¯ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø¯Ø®ÙˆÙ„/Ø§Ù„ØªØ³Ø¬ÙŠÙ„
    switchMode.addEventListener('click', (e) => {
      e.preventDefault();
      mode = mode === 'login' ? 'signup' : 'login';
      document.querySelector('.title').textContent = mode === 'login' ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨';
      document.querySelector('.subtitle').textContent = mode === 'login' ? 'Ø§Ø³ØªØ®Ø¯Ù… Ø­Ø³Ø§Ø¨Ùƒ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©' : 'Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ù‹Ø§ Ø¬Ø¯ÙŠØ¯Ù‹Ø§ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©';
      emailBtn.querySelector('.btn-text').textContent = mode === 'login' ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨';
      switchMode.textContent = mode === 'login' ? 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯' : 'Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø³Ø¬Ù‘Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„';
      showError(''); showSuccess('');
    });

    // Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø¨Ù‚Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ "ØªØ°ÙƒÙ‘Ø±Ù†ÙŠ"
    async function applyPersistence() {
      await setPersistence(auth, remember.checked ? browserLocalPersistence : browserSessionPersistence);
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
    forgot.addEventListener('click', async (e) => {
      e.preventDefault();
      if (!emailInput.value) { return showError('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£ÙˆÙ„Ù‹Ø§.'); }
      try {
        setLoading(true);
        await sendPasswordResetEmail(auth, emailInput.value);
        showSuccess('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ.');
      } catch (err) {
        showError(mapAuthError(err));
      } finally { setLoading(false); }
    });

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      showError(''); showSuccess('');
      const email = emailInput.value.trim();
      const password = passInput.value;
      if (!email || !password) return showError('Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.');

      try {
        setLoading(true);
        await applyPersistence();
        if (mode === 'login') {
          await signInWithEmailAndPassword(auth, email, password);
        } else {
          await createUserWithEmailAndPassword(auth, email, password);
        }
        // ØªÙ… Ø§Ù„Ø¯Ø®ÙˆÙ„
        showSuccess('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø³ÙŠØªÙ… Ù†Ù‚Ù„Ùƒ Ø§Ù„Ø¢Ù†...');
        // ØºÙŠÙ‘Ø± Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ§Ù„ÙŠ Ù„ØµÙØ­ØªÙƒ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„
        window.location.href = 'dashboard.html';
      } catch (err) {
        showError(mapAuthError(err));
      } finally {
        setLoading(false);
      }
    });

    // ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Google
    googleBtn.addEventListener('click', async () => {
      showError(''); showSuccess('');
      try {
        setLoading(true);
        await applyPersistence();
        const provider = new GoogleAuthProvider();
        await signInWithPopup(auth, provider);
        window.location.href = 'dashboard.html';
      } catch (err) {
        showError(mapAuthError(err));
      } finally { setLoading(false); }
    });
    

    // Ø¥Ù† ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¬Ù„Ø§Ù‹ Ø¨Ø§Ù„ÙØ¹Ù„
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // Ø¨Ø§Ù„ÙØ¹Ù„ Ù…Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ â€” ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ù…Ø¨Ø§Ø´Ø±Ø©
        // window.location.href = 'dashboard.html';
      }
    });

    // ØªØ­Ø³ÙŠÙ† Ø±Ø³Ø§Ø¦Ù„ Ø£Ø®Ø·Ø§Ø¡ Firebase Ù„Ù„Ø¹Ø±Ø¨ÙŠØ©
    function mapAuthError(err){
      const code = err?.code || '';
      const table = {
        'auth/invalid-email': 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ§Ù„Ø­.',
        'auth/missing-password': 'Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±.',
        'auth/weak-password': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø¶Ø¹ÙŠÙØ© (Ù¦ Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„).',
        'auth/user-not-found': 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø³Ø§Ø¨ Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯.',
        'auth/wrong-password': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.',
        'auth/email-already-in-use': 'Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³ØªØ®Ø¯Ù… Ø¨Ø§Ù„ÙØ¹Ù„.',
        'auth/popup-closed-by-user': 'ØªÙ… Ø¥ØºÙ„Ø§Ù‚ Ù†Ø§ÙØ°Ø© Ø¬ÙˆØ¬Ù„ Ù‚Ø¨Ù„ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø¹Ù…Ù„ÙŠØ©.',
        'auth/popup-blocked': 'ØªÙ… Ø­Ø¸Ø± Ù†Ø§ÙØ°Ø© Ø¬ÙˆØ¬Ù„ Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­.',
      };
      return table[code] || (err?.message || 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹.');
    }
  </script>
</body>
</html>
